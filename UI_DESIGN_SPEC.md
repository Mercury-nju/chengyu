# UI 设计规范

## 1. 右上角浮动登录图标

### 视觉设计
```
┌─────────────────────────────────────┐
│                              ╭─╮    │ ← 距顶部 60pt
│                              │👤│    │
│                              ╰─╯    │ ← 距右侧 20pt
│                                     │
│                                     │
│         主要内容区域                  │
│                                     │
│                                     │
└─────────────────────────────────────┘
```

### 尺寸规格
- **直径**: 44pt × 44pt
- **位置**: 
  - 距离顶部: 60pt
  - 距离右侧: 20pt
- **圆角**: 完全圆形 (cornerRadius = 22pt)

### 材质效果
- **背景**: `.ultraThinMaterial` (iOS 15+ 毛玻璃)
- **边框**: 1.5pt 渐变描边
  - 已登录: 青色 → 蓝色 (opacity 0.5 → 0.3)
  - 未登录: 白色半透明 (opacity 0.2 → 0.1)
- **阴影**:
  - 已登录: 青色光晕 (radius: 8pt, opacity: 0.3)
  - 未登录: 黑色阴影 (radius: 8pt, opacity: 0.2)

### 图标内容
- **已登录**: 用户名首字母 (18pt, semibold, 白色)
- **未登录**: `person.fill` SF Symbol (18pt, 白色 60% opacity)

### 交互效果
- **点击动画**: 缩放至 98% (spring animation)
- **响应时间**: 0.3秒
- **阻尼系数**: 0.6

---

## 2. 个人账户管理页面

### 页面结构
```
┌─────────────────────────────────────┐
│         ━━━  (拖动指示器)            │
│                                     │
│            ╭───────╮                │
│            │       │                │ ← 头像 (80×80)
│            │  头像  │                │
│            │       │                │
│            ╰───────╯                │
│                                     │
│            用户昵称                   │
│         ┌─────────┐                 │
│         │ 登录方式 │                 │ ← 登录方式标签
│         └─────────┘                 │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  澄域 Plus                   │   │
│  │  解锁完整冥想体验             │   │ ← 会员卡片
│  │  ✓ 无限制使用所有功能         │   │
│  │  ✓ 云端同步，多设备访问       │   │
│  │  ✓ 高级音频内容              │   │
│  │  [ 开通会员 → ]              │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📊  我的数据                 │   │
│  │     查看详细统计              │   │ ← 菜单项
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🔔  每日提醒                 │   │
│  │     设置冥想提醒              │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ ⚙️  设置                     │   │
│  │     个性化你的体验            │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ ❓  帮助与反馈               │   │
│  │     获取支持                  │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │      🚪 退出登录             │   │ ← 退出按钮
│  └─────────────────────────────┘   │
│                                     │
│         版本 1.0.0                  │
└─────────────────────────────────────┘
```

### 尺寸规格

#### 拖动指示器
- 宽度: 36pt
- 高度: 5pt
- 圆角: 3pt
- 颜色: 白色 30% opacity
- 位置: 顶部居中，距顶 12pt

#### 头像
- 尺寸: 80pt × 80pt
- 圆角: 完全圆形
- 边框: 2pt 渐变描边
- 阴影: 青色光晕 (radius: 20pt, opacity: 0.3)

#### 会员卡片
- 圆角: 24pt
- 内边距: 20pt
- 背景: 深紫色渐变
  - 起点: rgb(0.2, 0.15, 0.3)
  - 终点: rgb(0.15, 0.1, 0.2)
- 边框: 1pt 黄橙色渐变

#### 菜单项
- 圆角: 20pt
- 内边距: 16pt
- 背景: `.ultraThinMaterial` 30% opacity
- 图标圆形背景: 48pt × 48pt
- 间距: 12pt

#### 退出按钮
- 圆角: 16pt
- 内边距: 16pt (垂直)
- 背景: 红色 10% opacity
- 边框: 红色 20% opacity, 1pt
- 文字颜色: 红色 80% opacity

### 颜色规范

#### 渐变色
1. **头像渐变** (已登录)
   - 青色 (#00FFFF)
   - 蓝色 (#0000FF)
   - 紫色 (#800080)

2. **会员卡片背景**
   - 深紫 1: rgb(51, 38, 77) / #33264D
   - 深紫 2: rgb(38, 26, 51) / #261A33

3. **会员按钮**
   - 黄色 (#FFFF00)
   - 橙色 (#FFA500)

#### 单色
- **主文字**: 白色 100%
- **副文字**: 白色 60-70%
- **图标**: 青色 (#00FFFF)
- **分隔线**: 白色 10%

### 字体规范

#### 标题
- **用户名**: 24pt, Bold, San Francisco
- **卡片标题**: 20pt, Bold, San Francisco
- **菜单标题**: 16pt, Semibold, San Francisco

#### 正文
- **副标题**: 14pt, Regular, San Francisco
- **说明文字**: 13pt, Regular, San Francisco

#### 辅助
- **标签**: 12pt, Bold, San Francisco
- **版本号**: 10pt, Regular, San Francisco Mono

### 动画规范

#### 页面呈现
- **类型**: Sheet (从下向上)
- **高度**: .large (全屏)
- **拖动指示器**: 隐藏
- **背景**: 半透明黑色遮罩

#### 按钮交互
- **缩放**: 98% (按下时)
- **动画**: Spring
  - response: 0.3
  - dampingFraction: 0.6

#### 退出确认
- **类型**: Alert
- **按钮**: 取消 / 退出 (destructive)

---

## 3. 触感锚点白光过渡

### 时间轴
```
完成触摸 (t=0)
    ↓
冻结球体 (t=0)
    ↓
白光淡入 (0.3秒)
    ↓
白光保持 (t=0.3)
    ↓
白光淡出 (1.2秒)
    ↓
开始退出动画 (t=0.8)
    ↓
球体缩小 (0.5秒)
    ↓
关闭页面 (t=2.0)
```

### 详细参数

#### 白光闪烁
- **淡入时长**: 0.3秒 (easeIn)
- **峰值不透明度**: 100%
- **淡出时长**: 1.2秒 (easeOut)
- **淡出延迟**: 0.3秒
- **总持续时间**: 1.5秒

#### 球体退出
- **冻结时长**: 0.8秒
- **退出动画**: 0.5秒 (easeIn)
- **缩放**: 1.0 → 0.0
- **彩虹轨迹**: 同步扩散

#### 页面关闭
- **总延迟**: 2.0秒
- **关闭方式**: dismiss()

### 视觉效果对比

#### 修改前
```
完成 → 冻结 → 快闪(0.6s) → 快速退出(0.3s) → 关闭(1.5s)
总时长: ~1.5秒
感觉: 急促、突兀
```

#### 修改后
```
完成 → 冻结 → 舒缓闪烁(1.5s) → 平滑退出(0.5s) → 关闭(2.0s)
总时长: ~2.0秒
感觉: 平静、舒缓
```

---

## 4. 响应式适配

### iPhone 尺寸
- **SE (375×667)**: 正常显示
- **标准 (390×844)**: 正常显示
- **Plus (428×926)**: 正常显示
- **Max (430×932)**: 正常显示

### 安全区域
- 自动适应刘海屏
- 自动适应底部指示器
- 使用 `.ignoresSafeArea()` 仅用于背景

### 横屏模式
- 暂不支持（锁定竖屏）

---

## 5. 可访问性

### VoiceOver
- 所有按钮都有语义标签
- 图标使用 SF Symbols (自带可访问性)
- 头像显示用户名文字

### 动态字体
- 支持系统字体缩放
- 最小字号: 12pt
- 最大字号: 28pt

### 对比度
- 文字对比度 ≥ 4.5:1
- 图标对比度 ≥ 3:1
- 按钮对比度 ≥ 3:1

### 触摸目标
- 最小尺寸: 44pt × 44pt
- 所有交互元素符合规范

---

## 6. 性能优化

### 渲染优化
- 使用 `.drawingGroup()` 优化复杂渐变
- 避免过度使用 `.blur()`
- 限制阴影数量

### 动画优化
- 使用 `.animation()` 而非 `withAnimation()` (适当时)
- 避免嵌套动画
- 使用 `.transaction()` 控制动画传播

### 内存优化
- 图片使用 SF Symbols (矢量)
- 避免大图缓存
- 及时释放未使用的视图

---

## 7. 深色模式

### 当前实现
- 仅支持深色模式
- 背景: 纯黑 (#000000)
- 卡片: 白色 5% opacity

### 未来扩展
- 可添加浅色模式支持
- 使用 `@Environment(\.colorScheme)` 检测
- 定义浅色模式配色方案

---

## 8. 国际化

### 当前语言
- 简体中文 (zh-Hans)

### 待支持语言
- 英语 (en)
- 繁体中文 (zh-Hant)

### 文本长度考虑
- 按钮文字: 最多 8 个汉字
- 标题文字: 最多 12 个汉字
- 说明文字: 自动换行

---

## 9. 品牌一致性

### 应用名称
- 中文: 澄域
- 英文: Anchor (锚点)
- Slogan: "以光，澄澈心灵"

### 核心颜色
- **主色**: 青色 (Cyan) - 代表清澈、冷静
- **辅色**: 蓝色 (Blue) - 代表深度、专注
- **强调色**: 紫色 (Purple) - 代表灵性、冥想

### 设计语言
- **极简主义**: 少即是多
- **流动性**: 液态玻璃、渐变
- **呼吸感**: 动画舒缓、节奏平稳
- **科技感**: 毛玻璃、霓虹光晕

---

## 10. 开发注意事项

### SwiftUI 版本
- 最低: iOS 15.0
- 推荐: iOS 16.0+
- 使用特性:
  - `.ultraThinMaterial`
  - `.sheet(presentationDetents:)`
  - `LinearGradient`
  - `AngularGradient`

### 第三方依赖
- 无 (纯原生实现)

### 测试设备
- iPhone SE (第三代)
- iPhone 14 Pro
- iPhone 15 Pro Max

### 已知问题
- 无

---

## 更新日志

### v1.0.0 (2025-11-26)
- ✅ 实现右上角浮动登录图标
- ✅ 实现个人账户管理页面
- ✅ 优化触感锚点白光过渡
- ✅ 移除旧的登录卡片
- ✅ 添加会员推广卡片
